<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,  user-scalable=no">
    <link rel="shortcut icon" href="/imgs/zonewarlogo.jpeg" type="image/x-icon">

    <title>zonewar signup</title>
    <link rel="stylesheet" href="/css/signuplogin.css">
</head>
<body>
    <div class="img-container">

        <div class="main-container">
            
            <form action="/signup" method="post" class="form-container">
                <% if (mobileError) { %>
                    <p id="mobile-error"><%= mobileError %></p>
                <% } %>
                <h2>SIGN UP</h2>
                <input type="text" name="MobileNo" placeholder="Mobile No" minlength="10" maxlength="10" inputmode="numeric" pattern="[0-9]*" oninput="this.value=this.value.slice(0,10)" required>
                <input type="text" name="FFID" placeholder="Your FF Id" minlength="10" maxlength="10" inputmode="numeric" pattern="[0-9]*" oninput="this.value=this.value.slice(0,10)" required>
                <input type="text" name="FFNAME" placeholder="Your FF Name" required>
                <input type="password" minlength="6" maxlength="20" placeholder="password" name="password" id="password" required>
                <div class="ckeckbox-password-container">
                    <input type="checkbox" id="togglepassword">Check Password
                </div>
                <div class="checkbox-agreement-container">
                    <a href="termsandconditions">
                       <input type="checkbox" required> <span style="margin-left: 5px;">Agree terms and conditions</span>
                    </a>
                </div>
                <a href="/login">I have a account go to login</a>
   
                <input type="submit" value="Signup">
            </form>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-messaging.js"></script>
    <script src="/js/signuplogin.js">

        // Initialize Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCofmkkCvSb5TR3gDe3uSVYSoXbBYgvyqg",
    authDomain: "zonewarpushnotification.firebaseapp.com",
    projectId: "zonewarpushnotification",
    storageBucket: "zonewarpushnotification.firebasestorage.app",
    messagingSenderId: "1009522500725",
    appId: "1:1009522500725:web:dc5c4a75d89d1d43edc43c",
    measurementId: "G-1C0HPTZ588"
  };

  firebase.initializeApp(firebaseConfig);

  const messaging = firebase.messaging();

  messaging.requestPermission()
    .then(() => {
      return messaging.getToken();
    })
    .then((token) => {
      // Send token to your backend along with other form data
      document.querySelector("form").addEventListener("submit", function(e) {
        e.preventDefault();

        // Add fcmToken to form data
        const formData = new FormData(this);
        formData.append("fcmToken", token);

        fetch('/signup', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          // Handle success or failure
        });
      });
    })
    .catch((err) => {
      console.error('Error getting FCM token:', err);
    });
    </script>
</body>
</html>